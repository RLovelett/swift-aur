From ee48569096a1467bf1530e0ec8c0b89c24196767 Mon Sep 17 00:00:00 2001
From: Ryan Lovelett <ryan@lovelett.me>
Date: Thu, 24 Dec 2015 14:34:27 -0500
Subject: [PATCH] Prefer XZ compression over Gzip compression

---
 utils/build-script      | 4 ++--
 utils/build-script-impl | 4 ++--
 2 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/utils/build-script b/utils/build-script
index 72cb48b..a570f8d 100755
--- a/utils/build-script
+++ b/utils/build-script
@@ -240,12 +240,12 @@ To build with AddressSanitizer:
 
   [~/src/s]$ ./swift/utils/build-script --preset=asan
 
-To build a root for Xcode XYZ, '/tmp/xcode-xyz-root.tar.gz':
+To build a root for Xcode XYZ, '/tmp/xcode-xyz-root.tar.xz':
 
   [~/src/s]$ ./swift/utils/build-script --preset=buildbot_BNI_internal_XYZ \\
       install_destdir="/tmp/install"
       install_symroot="/tmp/symroot"
-      installable_package="/tmp/xcode-xyz-root.tar.gz"
+      installable_package="/tmp/xcode-xyz-root.tar.xz"
 
 If you have your own favorite set of options, you can create your own, local,
 preset.  For example, let's create a preset called 'ds' (which stands for
diff --git a/utils/build-script-impl b/utils/build-script-impl
index 44429d1..590da1b 100755
--- a/utils/build-script-impl
+++ b/utils/build-script-impl
@@ -2270,10 +2270,10 @@ if [[ "${INSTALLABLE_PACKAGE}" ]] ; then
       fi 
 
       (cd "${INSTALL_DESTDIR}" &&
-        tar -c -z -f "${INSTALLABLE_PACKAGE}" "${TOOLCHAIN_PREFIX/#\/}")
+        tar -c -J -f "${INSTALLABLE_PACKAGE}" "${TOOLCHAIN_PREFIX/#\/}")
     else
       (cd "${INSTALL_DESTDIR}" &&
-        tar -c -z -f "${INSTALLABLE_PACKAGE}" --owner=0 --group=0 "${INSTALL_PREFIX/#\/}")
+        tar -c -J -f "${INSTALLABLE_PACKAGE}" --owner=0 --group=0 "${INSTALL_PREFIX/#\/}")
     fi
     if [[ "${TEST_INSTALLABLE_PACKAGE}" ]] ; then
         PKG_TESTS_SOURCE_DIR="${WORKSPACE}/swift-integration-tests"
-- 
2.6.4

